<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAIHO 3D Elite Adventure</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; font-family: sans-serif; }
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; color: white; pointer-events: none; }
        .score-board { font-size: 24px; font-weight: 900; letter-spacing: 2px; }
        .score-board span { color: #e60012; }
        
        /* 模擬機台按鈕 */
        #controls { 
            position: absolute; bottom: 30px; width: 100%; 
            display: grid; grid-template-columns: repeat(3, 80px); 
            justify-content: center; gap: 15px;
        }
        .btn {
            width: 80px; height: 80px; background: #d1d9e6; border-radius: 50%;
            border: none; box-shadow: 0 6px 0 #888, 0 10px 20px rgba(0,0,0,0.5);
            font-size: 24px; cursor: pointer; transition: 0.1s;
        }
        .btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #888; }
        .up { grid-column: 2; } .left { grid-column: 1; grid-row: 2; }
        .down { grid-column: 2; grid-row: 2; } .right { grid-column: 3; grid-row: 2; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>

    <div id="ui">
        <div class="score-board">PAIHO <span>3D ELITE</span></div>
        <div id="score">SCORE: 0</div>
    </div>

    <div id="controls">
        <button class="btn up" onclick="changeDir(0,1)">▲</button>
        <button class="btn left" onclick="changeDir(-1,0)">◀</button>
        <button class="btn down" onclick="changeDir(0,-1)">▼</button>
        <button class="btn right" onclick="changeDir(1,0)">▶</button>
    </div>

<script>
    let scene, camera, renderer, snake = [], food, grid = 12, size = 2;
    let dx = 0, dz = 1;
    let score = 0;

    init();
    animate();

    function init() {
        // 1. 場景與相機
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a1a);
        
        camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 20, 15); // 斜上方俯瞰視角
        camera.lookAt(0, 0, 0);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        // 2. 光照 (這就是質感的來源)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 1);
        pointLight.position.set(5, 15, 5);
        pointLight.castShadow = true;
        scene.add(pointLight);

        // 3. 地板 (模擬運動鞋網布)
        const floorGeo = new THREE.PlaneGeometry(30, 30);
        const floorMat = new THREE.MeshStandardMaterial({ color: 0x2c3e50, roughness: 0.8 });
        const floor = new THREE.Mesh(floorGeo, floorMat);
        floor.rotation.x = -Math.PI / 2;
        floor.receiveShadow = true;
        scene.add(floor);

        // 4. 初始化蛇 (百和紅織帶)
        for(let i=0; i<3; i++) {
            addSnakePart(0, 0, -i);
        }

        // 5. 鞋眼孔 (3D 圓環)
        const torusGeo = new THREE.TorusGeometry(0.8, 0.2, 16, 100);
        const torusMat = new THREE.MeshStandardMaterial({ color: 0xd4af37, metalness: 0.8, roughness: 0.2 });
        food = new THREE.Mesh(torusGeo, torusMat);
        food.rotation.x = Math.PI / 2;
        food.position.set(4, 0.2, 4);
        scene.add(food);
    }

    function addSnakePart(x, y, z) {
        const geo = new THREE.BoxGeometry(1.8, 0.6, 1.8);
        const mat = new THREE.MeshStandardMaterial({ color: 0xe60012, roughness: 0.5 });
        const part = new THREE.Mesh(geo, mat);
        part.position.set(x * size, 0.5, z * size);
        part.castShadow = true;
        scene.add(part);
        snake.unshift(part);
    }

    function changeDir(x, z) {
        dx = x; dz = z;
    }

    function updateGame() {
        if (dx === 0 && dz === 0) return;

        const head = snake[0].position.clone();
        head.x += dx * size;
        head.z -= dz * size;

        // 碰撞檢測 (簡化版)
        if (head.distanceTo(food.position) < 1.5) {
            score++;
            document.getElementById('score').innerText = "SCORE: " + score;
            food.position.set((Math.random()-0.5)*20, 0.2, (Math.random()-0.5)*20);
            // 增長邏輯...
        }

        // 移動身體
        for (let i = snake.length - 1; i > 0; i--) {
            snake[i].position.copy(snake[i-1].position);
        }
        snake[0].position.copy(head);
    }

    let frame = 0;
    function animate() {
        requestAnimationFrame(animate);
        frame++;
        if (frame % 10 === 0) updateGame();
        renderer.render(scene, camera);
    }
</script>
</body>
</html>
